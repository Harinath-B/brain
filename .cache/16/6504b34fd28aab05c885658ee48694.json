{"id":"Focm","dependencies":[{"name":"/home/hari/Desktop/mystery-ai/brain/package.json","includedInParent":true,"mtime":1704390744954},{"name":"three","loc":{"line":15,"column":7,"index":183},"parent":"/home/hari/Desktop/mystery-ai/brain/src/index.js","resolved":"/home/hari/Desktop/mystery-ai/brain/node_modules/three/build/three.module.js"},{"name":"three/examples/jsm/loaders/GLTFLoader","loc":{"line":18,"column":27,"index":273},"parent":"/home/hari/Desktop/mystery-ai/brain/src/index.js","resolved":"/home/hari/Desktop/mystery-ai/brain/node_modules/three/examples/jsm/loaders/GLTFLoader.js"},{"name":"three-instanced-uniforms-mesh","loc":{"line":20,"column":38,"index":352},"parent":"/home/hari/Desktop/mystery-ai/brain/src/index.js","resolved":"/home/hari/Desktop/mystery-ai/brain/node_modules/three-instanced-uniforms-mesh/dist/three-instanced-uniforms-mesh.esm.js"},{"name":"stats.js","loc":{"line":22,"column":18,"index":403},"parent":"/home/hari/Desktop/mystery-ai/brain/src/index.js","resolved":"/home/hari/Desktop/mystery-ai/brain/node_modules/stats.js/build/stats.min.js"},{"name":"gsap","loc":{"line":23,"column":21,"index":435},"parent":"/home/hari/Desktop/mystery-ai/brain/src/index.js","resolved":"/home/hari/Desktop/mystery-ai/brain/node_modules/gsap/index.js"},{"name":"./shaders/brain.vertex.glsl","loc":{"line":133,"column":32,"index":2979},"parent":"/home/hari/Desktop/mystery-ai/brain/src/index.js","resolved":"/home/hari/Desktop/mystery-ai/brain/src/shaders/brain.vertex.glsl"},{"name":"./shaders/brain.fragment.glsl","loc":{"line":134,"column":34,"index":3045},"parent":"/home/hari/Desktop/mystery-ai/brain/src/index.js","resolved":"/home/hari/Desktop/mystery-ai/brain/src/shaders/brain.fragment.glsl"}],"generated":{"js":"\"use strict\";var e=require(\"three\"),t=require(\"three/examples/jsm/loaders/GLTFLoader\"),i=require(\"three-instanced-uniforms-mesh\"),n=o(require(\"stats.js\")),r=require(\"gsap\");function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}var h=new n.default;document.body.appendChild(h.dom);var u=function(){function n(t){var i=this;s(this,n),this.container=document.querySelector(t),this.hover=!1,this.colors=[new e.Color(9845949),new e.Color(16740193),new e.Color(12921243),new e.Color(16690769)],this.uniforms={uHover:0},this._resizeCb=function(){return i._onResize()},this._mousemoveCb=function(e){return i._onMousemove(e)}}return c(n,[{key:\"init\",value:function(){var e=this;this._createScene(),this._createCamera(),this._createRenderer(),this._createRaycaster(),this._createLoader(),this._checkMobile(),this._loadModel().then(function(){e._addListeners(),e.renderer.setAnimationLoop(function(){h.begin(),e._update(),e._render(),h.end()}),console.log(e)})}},{key:\"destroy\",value:function(){this.renderer.dispose(),this._removeListeners()}},{key:\"_update\",value:function(){this.camera.lookAt(0,0,0),this.camera.position.z=this.isMobile?2.3:1.2}},{key:\"_render\",value:function(){this.renderer.render(this.scene,this.camera)}},{key:\"_createScene\",value:function(){this.scene=new e.Scene}},{key:\"_createCamera\",value:function(){this.camera=new e.PerspectiveCamera(75,this.container.clientWidth/this.container.clientHeight,.1,100),this.camera.position.set(0,0,1.2)}},{key:\"_createRenderer\",value:function(){this.renderer=new e.WebGLRenderer({alpha:!0,antialias:1===window.devicePixelRatio}),this.container.appendChild(this.renderer.domElement),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(Math.min(1.5,window.devicePixelRatio)),this.renderer.physicallyCorrectLights=!0}},{key:\"_createLoader\",value:function(){this.loadingManager=new e.LoadingManager,this.loadingManager.onLoad=function(){document.documentElement.classList.add(\"model-loaded\")},this.gltfLoader=new t.GLTFLoader(this.loadingManager)}},{key:\"_loadModel\",value:function(){var t=this;return new Promise(function(n){t.gltfLoader.load(\"./brain.glb\",function(r){t.brain=r.scene.children[0];var o=new e.BoxGeometry(.004,.004,.004,1,1,1),s=new e.ShaderMaterial({vertexShader:require(\"./shaders/brain.vertex.glsl\"),fragmentShader:require(\"./shaders/brain.fragment.glsl\"),wireframe:!0,uniforms:{uPointer:{value:new e.Vector3},uColor:{value:new e.Color},uRotation:{value:0},uSize:{value:0},uHover:{value:t.uniforms.uHover}}});t.instancedMesh=new i.InstancedUniformsMesh(o,s,t.brain.geometry.attributes.position.count),t.scene.add(t.instancedMesh);for(var a=new e.Object3D,c=t.brain.geometry.attributes.position.array,h=0;h<c.length;h+=3){a.position.set(c[h+0],c[h+1],c[h+2]),a.updateMatrix(),t.instancedMesh.setMatrixAt(h/3,a.matrix),t.instancedMesh.setUniformAt(\"uRotation\",h/3,e.MathUtils.randFloat(-1,1)),t.instancedMesh.setUniformAt(\"uSize\",h/3,e.MathUtils.randFloat(.3,3));var u=e.MathUtils.randInt(0,t.colors.length-1);t.instancedMesh.setUniformAt(\"uColor\",h/3,t.colors[u])}n()})})}},{key:\"_createRaycaster\",value:function(){this.mouse=new e.Vector2,this.raycaster=new e.Raycaster,this.intersects=[],this.point=new e.Vector3}},{key:\"_addListeners\",value:function(){window.addEventListener(\"resize\",this._resizeCb,{passive:!0}),window.addEventListener(\"mousemove\",this._mousemoveCb,{passive:!0})}},{key:\"_removeListeners\",value:function(){window.removeEventListener(\"resize\",this._resizeCb,{passive:!0}),window.removeEventListener(\"mousemove\",this._mousemoveCb,{passive:!0})}},{key:\"_onMousemove\",value:function(e){var t=this,i=e.clientX/this.container.offsetWidth*2-1,n=-(e.clientY/this.container.offsetHeight*2-1);this.mouse.set(i,n),r.gsap.to(this.camera.position,{x:function(){return.15*i},y:function(){return.1*n},duration:.5}),this.raycaster.setFromCamera(this.mouse,this.camera),this.intersects=this.raycaster.intersectObject(this.brain),0===this.intersects.length?this.hover&&(this.hover=!1,this._animateHoverUniform(0)):(this.hover||(this.hover=!0,this._animateHoverUniform(1)),r.gsap.to(this.point,{x:function(){var e;return(null===(e=t.intersects[0])||void 0===e?void 0:e.point.x)||0},y:function(){var e;return(null===(e=t.intersects[0])||void 0===e?void 0:e.point.y)||0},z:function(){var e;return(null===(e=t.intersects[0])||void 0===e?void 0:e.point.z)||0},overwrite:!0,duration:.3,onUpdate:function(){for(var e=0;e<t.instancedMesh.count;e++)t.instancedMesh.setUniformAt(\"uPointer\",e,t.point)}}))}},{key:\"_animateHoverUniform\",value:function(e){var t=this;r.gsap.to(this.uniforms,{uHover:e,duration:.25,onUpdate:function(){for(var e=0;e<t.instancedMesh.count;e++)t.instancedMesh.setUniformAt(\"uHover\",e,t.uniforms.uHover)}})}},{key:\"_checkMobile\",value:function(){this.isMobile=window.innerWidth<767}},{key:\"_onResize\",value:function(){this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this._checkMobile()}}]),n}(),d=new u(\"#app\");d.init();"},"sourceMaps":null,"error":null,"hash":"66b2cd42ada7a0812c53e8a868febccc","cacheData":{"env":{}}}